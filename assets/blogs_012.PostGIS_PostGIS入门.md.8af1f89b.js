import{_ as e,o as a,c as s,d as i}from"./app.d2608a1e.js";const t="/xuanmu-blogs/assets/img-2023-08-16-19-59-50.7759831a.png",l="/xuanmu-blogs/assets/img-2023-08-16-20-00-17.5dfe80f3.png",n="/xuanmu-blogs/assets/img-2023-08-16-20-00-42.279fce14.png",r="/xuanmu-blogs/assets/img-2023-08-16-20-00-55.62d8e373.png",o="/xuanmu-blogs/assets/img-2023-08-16-20-01-12.f9132aa1.png",d="/xuanmu-blogs/assets/img-2023-08-16-20-01-26.a6283813.png",h="/xuanmu-blogs/assets/img-2023-08-16-20-01-39.0f258f5d.png",_="/xuanmu-blogs/assets/img-2023-08-16-20-01-53.7e4fcf2a.png",g="/xuanmu-blogs/assets/img-2023-08-16-20-02-04.0e78763e.png",c="/xuanmu-blogs/assets/img-2023-08-16-20-02-16.e90417ee.png",p="/xuanmu-blogs/assets/img-2023-08-16-20-02-28.d4e0347e.png",m="/xuanmu-blogs/assets/img-2023-08-16-20-02-42.0bef2335.png",u="/xuanmu-blogs/assets/img-2023-08-16-20-02-55.13f13b66.png",k="/xuanmu-blogs/assets/img-2023-08-16-20-06-20.0ba4acaf.png",b="/xuanmu-blogs/assets/img-2023-08-16-20-06-08.0a1a2fc0.png",x="/xuanmu-blogs/assets/img-2023-08-16-20-05-14.904f1fd8.png",f="/xuanmu-blogs/assets/img-2023-08-16-20-05-34.27a59813.png",v="/xuanmu-blogs/assets/img-2023-08-16-20-06-40.13121b86.png",w="/xuanmu-blogs/assets/img-2023-08-16-20-06-49.16deec4e.png",S="/xuanmu-blogs/assets/img-2023-08-16-20-06-57.0d6b1b1a.png",T="/xuanmu-blogs/assets/img-2023-08-16-20-07-04.9c6f8e83.png",y="/xuanmu-blogs/assets/img-2023-08-16-20-07-11.ba50a8a8.png",I="/xuanmu-blogs/assets/img-2023-08-16-20-07-22.446487d7.png",j="/xuanmu-blogs/assets/img-2023-08-16-20-07-26.d79261a4.png",W="/xuanmu-blogs/assets/img-2023-08-16-20-07-34.a280fe7a.png",E="/xuanmu-blogs/assets/img-2023-08-16-20-07-47.334099a0.png",K="/xuanmu-blogs/assets/img-2023-08-16-20-07-53.f3c3372e.png",P="/xuanmu-blogs/assets/img-2023-08-16-20-07-59.7b2b1cac.png",q="/xuanmu-blogs/assets/img-2023-08-16-20-08-07.626ca15b.png",G="/xuanmu-blogs/assets/img-2023-08-16-20-08-13.1167fd2d.png",D="/xuanmu-blogs/assets/img-2023-08-16-20-08-22.5249b2bd.png",J=JSON.parse('{"title":"PostGIS 入门","description":"","frontmatter":{},"headers":[{"level":2,"title":"一、创建和基本使用","slug":"一、创建和基本使用","link":"#一、创建和基本使用","children":[{"level":3,"title":"1.1 创建数据库","slug":"_1-1-创建数据库","link":"#_1-1-创建数据库","children":[]},{"level":3,"title":"1.2 创建数据扩展","slug":"_1-2-创建数据扩展","link":"#_1-2-创建数据扩展","children":[]},{"level":3,"title":"1.3 通过查询版本号查看是否创建成功","slug":"_1-3-通过查询版本号查看是否创建成功","link":"#_1-3-通过查询版本号查看是否创建成功","children":[]},{"level":3,"title":"1.4 创建数据点 作为结果 并转为geojson格式。","slug":"_1-4-创建数据点-作为结果-并转为geojson格式。","link":"#_1-4-创建数据点-作为结果-并转为geojson格式。","children":[]}]},{"level":2,"title":"二、QGIS连接数据库并存储矢量数据","slug":"二、qgis连接数据库并存储矢量数据","link":"#二、qgis连接数据库并存储矢量数据","children":[{"level":3,"title":"2.1 在QGIS中添加连接","slug":"_2-1-在qgis中添加连接","link":"#_2-1-在qgis中添加连接","children":[]},{"level":3,"title":"2.2 在数据管理器中打开","slug":"_2-2-在数据管理器中打开","link":"#_2-2-在数据管理器中打开","children":[]},{"level":3,"title":"2.3 选中并导入图层，一般勾选创建空间索引即可","slug":"_2-3-选中并导入图层-一般勾选创建空间索引即可","link":"#_2-3-选中并导入图层-一般勾选创建空间索引即可","children":[]},{"level":3,"title":"2.4 从数据库中拖拽即可查看存储的数据","slug":"_2-4-从数据库中拖拽即可查看存储的数据","link":"#_2-4-从数据库中拖拽即可查看存储的数据","children":[]}]},{"level":2,"title":"三、数据格式","slug":"三、数据格式","link":"#三、数据格式","children":[{"level":3,"title":"3.1 构建点（实际上是geometry）","slug":"_3-1-构建点-实际上是geometry","link":"#_3-1-构建点-实际上是geometry","children":[]},{"level":3,"title":"3.2 转wkt输出","slug":"_3-2-转wkt输出","link":"#_3-2-转wkt输出","children":[]},{"level":3,"title":"3.3 转二进制输出","slug":"_3-3-转二进制输出","link":"#_3-3-转二进制输出","children":[]},{"level":3,"title":"3.4 转经纬度文本","slug":"_3-4-转经纬度文本","link":"#_3-4-转经纬度文本","children":[]},{"level":3,"title":"3.5 转geojson","slug":"_3-5-转geojson","link":"#_3-5-转geojson","children":[]},{"level":3,"title":"3.6 输入 ‘sql语句中字符串用单引号’","slug":"_3-6-输入-sql语句中字符串用单引号","link":"#_3-6-输入-sql语句中字符串用单引号","children":[]},{"level":3,"title":"3.7 再次输出为wkt类型","slug":"_3-7-再次输出为wkt类型","link":"#_3-7-再次输出为wkt类型","children":[]},{"level":3,"title":"3.8 再转为geojson。可以多次嵌套转换格式","slug":"_3-8-再转为geojson。可以多次嵌套转换格式","link":"#_3-8-再转为geojson。可以多次嵌套转换格式","children":[]}]},{"level":2,"title":"四、补充","slug":"四、补充","link":"#四、补充","children":[{"level":3,"title":"4.1 WKT只能支持二维格式，因此postgis提供了新的格式支持三维，并且加入了三维坐标ID的定义- EWKT，EWKB，与最新的格式规范的区别是多了ID定义。","slug":"_4-1-wkt只能支持二维格式-因此postgis提供了新的格式支持三维-并且加入了三维坐标id的定义-ewkt-ewkb-与最新的格式规范的区别是多了id定义。","link":"#_4-1-wkt只能支持二维格式-因此postgis提供了新的格式支持三维-并且加入了三维坐标id的定义-ewkt-ewkb-与最新的格式规范的区别是多了id定义。","children":[]},{"level":3,"title":"4.2 st_makepoint()构造EWKT三维点 帮助文档8.3.5章","slug":"_4-2-st-makepoint-构造ewkt三维点-帮助文档8-3-5章","link":"#_4-2-st-makepoint-构造ewkt三维点-帮助文档8-3-5章","children":[]},{"level":3,"title":"4.3 坐标SRID","slug":"_4-3-坐标srid","link":"#_4-3-坐标srid","children":[]},{"level":3,"title":"4.4 去掉Z 也是可以查到的 但是去掉SRID不行","slug":"_4-4-去掉z-也是可以查到的-但是去掉srid不行","link":"#_4-4-去掉z-也是可以查到的-但是去掉srid不行","children":[]},{"level":3,"title":"4.5 类型转换，允许直接把某种格式解析到几何，8.1.3 章节","slug":"_4-5-类型转换-允许直接把某种格式解析到几何-8-1-3-章节","link":"#_4-5-类型转换-允许直接把某种格式解析到几何-8-1-3-章节","children":[]},{"level":3,"title":"4.6 需要明确的类型转换，在后面加上：：","slug":"_4-6-需要明确的类型转换-在后面加上","link":"#_4-6-需要明确的类型转换-在后面加上","children":[]},{"level":3,"title":"4.7 加上SRID","slug":"_4-7-加上srid","link":"#_4-7-加上srid","children":[]},{"level":3,"title":"4.8 自动解析，直接解析输入成geometry并且转为wkt","slug":"_4-8-自动解析-直接解析输入成geometry并且转为wkt","link":"#_4-8-自动解析-直接解析输入成geometry并且转为wkt","children":[]}]},{"level":2,"title":"五、几何（Geometry）","slug":"五、几何-geometry","link":"#五、几何-geometry","children":[{"level":3,"title":"5.1 简单几何的构造 （8.3章节）","slug":"_5-1-简单几何的构造-8-3章节","link":"#_5-1-简单几何的构造-8-3章节","children":[]},{"level":3,"title":"5.2 点串线","slug":"_5-2-点串线","link":"#_5-2-点串线","children":[]},{"level":3,"title":"5.3 自动解析 换成wkt的点，仍然可以执行","slug":"_5-3-自动解析-换成wkt的点-仍然可以执行","link":"#_5-3-自动解析-换成wkt的点-仍然可以执行","children":[]},{"level":3,"title":"5.4 几何集（Collection） 把一堆几何放到一个几何里面输出","slug":"_5-4-几何集-collection-把一堆几何放到一个几何里面输出","link":"#_5-4-几何集-collection-把一堆几何放到一个几何里面输出","children":[]},{"level":3,"title":"5.5 范围框 ST_MakeEnvelope （8.3.3）","slug":"_5-5-范围框-st-makeenvelope-8-3-3","link":"#_5-5-范围框-st-makeenvelope-8-3-3","children":[]},{"level":3,"title":"5.6 输出EWKT","slug":"_5-6-输出ewkt","link":"#_5-6-输出ewkt","children":[]},{"level":3,"title":"5.7 Web墨卡托 瓦片计算范围 ST_TileEnvelope（8.3.10）","slug":"_5-7-web墨卡托-瓦片计算范围-st-tileenvelope-8-3-10","link":"#_5-7-web墨卡托-瓦片计算范围-st-tileenvelope-8-3-10","children":[]}]}],"relativePath":"blogs/012.PostGIS/PostGIS入门.md"}'),B={name:"blogs/012.PostGIS/PostGIS入门.md"},R=i('<h1 id="postgis-入门" tabindex="-1">PostGIS 入门 <a class="header-anchor" href="#postgis-入门" aria-hidden="true">#</a></h1><p>PostGIS：提供地理图形数据的支持；提供大量成熟的 SQL 函数以便进行分析和转换地理数据</p><h2 id="一、创建和基本使用" tabindex="-1">一、创建和基本使用 <a class="header-anchor" href="#一、创建和基本使用" aria-hidden="true">#</a></h2><h3 id="_1-1-创建数据库" tabindex="-1">1.1 创建数据库 <a class="header-anchor" href="#_1-1-创建数据库" aria-hidden="true">#</a></h3><p><img src="'+t+'" alt=""></p><h3 id="_1-2-创建数据扩展" tabindex="-1">1.2 创建数据扩展 <a class="header-anchor" href="#_1-2-创建数据扩展" aria-hidden="true">#</a></h3><p>在架构上右键运行sql查询，会有智能提示</p><p><img src="'+l+'" alt=""></p><h3 id="_1-3-通过查询版本号查看是否创建成功" tabindex="-1">1.3 通过查询版本号查看是否创建成功 <a class="header-anchor" href="#_1-3-通过查询版本号查看是否创建成功" aria-hidden="true">#</a></h3><p><img src="'+n+'" alt=""></p><h3 id="_1-4-创建数据点-作为结果-并转为geojson格式。" tabindex="-1">1.4 创建数据点 作为结果 并转为geojson格式。 <a class="header-anchor" href="#_1-4-创建数据点-作为结果-并转为geojson格式。" aria-hidden="true">#</a></h3><p><img src="'+r+'" alt=""></p><h2 id="二、qgis连接数据库并存储矢量数据" tabindex="-1">二、QGIS连接数据库并存储矢量数据 <a class="header-anchor" href="#二、qgis连接数据库并存储矢量数据" aria-hidden="true">#</a></h2><h3 id="_2-1-在qgis中添加连接" tabindex="-1">2.1 在QGIS中添加连接 <a class="header-anchor" href="#_2-1-在qgis中添加连接" aria-hidden="true">#</a></h3><p><img src="'+o+'" alt=""></p><h3 id="_2-2-在数据管理器中打开" tabindex="-1">2.2 在数据管理器中打开 <a class="header-anchor" href="#_2-2-在数据管理器中打开" aria-hidden="true">#</a></h3><p>一般不要把数据放在public架构中，新建basedata</p><p><img src="'+d+'" alt=""><img src="'+h+'" alt=""></p><h3 id="_2-3-选中并导入图层-一般勾选创建空间索引即可" tabindex="-1">2.3 选中并导入图层，一般勾选创建空间索引即可 <a class="header-anchor" href="#_2-3-选中并导入图层-一般勾选创建空间索引即可" aria-hidden="true">#</a></h3><p><img src="'+_+'" alt=""></p><h3 id="_2-4-从数据库中拖拽即可查看存储的数据" tabindex="-1">2.4 从数据库中拖拽即可查看存储的数据 <a class="header-anchor" href="#_2-4-从数据库中拖拽即可查看存储的数据" aria-hidden="true">#</a></h3><p><img src="'+g+`" alt=""></p><h2 id="三、数据格式" tabindex="-1">三、数据格式 <a class="header-anchor" href="#三、数据格式" aria-hidden="true">#</a></h2><p>常用输出与输入：</p><pre><code>postgis 中常用的数据格式文本类型：WKT（ST_AsText） / geojson（ST_AsGeoJSON）

    二进制类型：WKB（ST_AsBinary）
</code></pre><h3 id="_3-1-构建点-实际上是geometry" tabindex="-1">3.1 构建点（实际上是geometry） <a class="header-anchor" href="#_3-1-构建点-实际上是geometry" aria-hidden="true">#</a></h3><p><img src="`+c+'" alt=""></p><h3 id="_3-2-转wkt输出" tabindex="-1">3.2 转wkt输出 <a class="header-anchor" href="#_3-2-转wkt输出" aria-hidden="true">#</a></h3><p><img src="'+p+'" alt=""></p><h3 id="_3-3-转二进制输出" tabindex="-1">3.3 转二进制输出 <a class="header-anchor" href="#_3-3-转二进制输出" aria-hidden="true">#</a></h3><p><img src="'+m+'" alt=""></p><h3 id="_3-4-转经纬度文本" tabindex="-1">3.4 转经纬度文本 <a class="header-anchor" href="#_3-4-转经纬度文本" aria-hidden="true">#</a></h3><p><img src="'+u+'" alt=""></p><h3 id="_3-5-转geojson" tabindex="-1">3.5 转geojson <a class="header-anchor" href="#_3-5-转geojson" aria-hidden="true">#</a></h3><p><img src="'+k+'" alt=""></p><h3 id="_3-6-输入-sql语句中字符串用单引号" tabindex="-1">3.6 输入 ‘sql语句中字符串用单引号’ <a class="header-anchor" href="#_3-6-输入-sql语句中字符串用单引号" aria-hidden="true">#</a></h3><p>输入转postgis的geometry类型</p><p><img src="'+b+'" alt=""></p><h3 id="_3-7-再次输出为wkt类型" tabindex="-1">3.7 再次输出为wkt类型 <a class="header-anchor" href="#_3-7-再次输出为wkt类型" aria-hidden="true">#</a></h3><p><img src="'+x+'" alt=""></p><h3 id="_3-8-再转为geojson。可以多次嵌套转换格式" tabindex="-1">3.8 再转为geojson。可以多次嵌套转换格式 <a class="header-anchor" href="#_3-8-再转为geojson。可以多次嵌套转换格式" aria-hidden="true">#</a></h3><p><img src="'+f+`" alt=""> 官方文档的8.8 /8.9节可查格式</p><h2 id="四、补充" tabindex="-1">四、补充 <a class="header-anchor" href="#四、补充" aria-hidden="true">#</a></h2><pre><code>三维几何点

WKT、 WKB 和 EWKT、 EWKB 

自动解析与类型转换
</code></pre><h3 id="_4-1-wkt只能支持二维格式-因此postgis提供了新的格式支持三维-并且加入了三维坐标id的定义-ewkt-ewkb-与最新的格式规范的区别是多了id定义。" tabindex="-1">4.1 WKT只能支持二维格式，因此postgis提供了新的格式支持三维，并且加入了三维坐标ID的定义- EWKT，EWKB，与最新的格式规范的区别是多了ID定义。 <a class="header-anchor" href="#_4-1-wkt只能支持二维格式-因此postgis提供了新的格式支持三维-并且加入了三维坐标id的定义-ewkt-ewkb-与最新的格式规范的区别是多了id定义。" aria-hidden="true">#</a></h3><h3 id="_4-2-st-makepoint-构造ewkt三维点-帮助文档8-3-5章" tabindex="-1">4.2 st_makepoint()构造EWKT三维点 帮助文档8.3.5章 <a class="header-anchor" href="#_4-2-st-makepoint-构造ewkt三维点-帮助文档8-3-5章" aria-hidden="true">#</a></h3><p><img src="`+v+'" alt=""></p><h3 id="_4-3-坐标srid" tabindex="-1">4.3 坐标SRID <a class="header-anchor" href="#_4-3-坐标srid" aria-hidden="true">#</a></h3><p><img src="'+w+'" alt=""></p><h3 id="_4-4-去掉z-也是可以查到的-但是去掉srid不行" tabindex="-1">4.4 去掉Z 也是可以查到的 但是去掉SRID不行 <a class="header-anchor" href="#_4-4-去掉z-也是可以查到的-但是去掉srid不行" aria-hidden="true">#</a></h3><p><img src="'+S+'" alt=""></p><h3 id="_4-5-类型转换-允许直接把某种格式解析到几何-8-1-3-章节" tabindex="-1">4.5 类型转换，允许直接把某种格式解析到几何，8.1.3 章节 <a class="header-anchor" href="#_4-5-类型转换-允许直接把某种格式解析到几何-8-1-3-章节" aria-hidden="true">#</a></h3><p><img src="'+T+'" alt=""></p><h3 id="_4-6-需要明确的类型转换-在后面加上" tabindex="-1">4.6 需要明确的类型转换，在后面加上：： <a class="header-anchor" href="#_4-6-需要明确的类型转换-在后面加上" aria-hidden="true">#</a></h3><p><img src="'+y+'" alt=""></p><p><img src="'+I+'" alt=""></p><h3 id="_4-7-加上srid" tabindex="-1">4.7 加上SRID <a class="header-anchor" href="#_4-7-加上srid" aria-hidden="true">#</a></h3><p><img src="'+j+'" alt=""></p><h3 id="_4-8-自动解析-直接解析输入成geometry并且转为wkt" tabindex="-1">4.8 自动解析，直接解析输入成geometry并且转为wkt <a class="header-anchor" href="#_4-8-自动解析-直接解析输入成geometry并且转为wkt" aria-hidden="true">#</a></h3><p><img src="'+W+'" alt=""></p><h2 id="五、几何-geometry" tabindex="-1">五、几何（Geometry） <a class="header-anchor" href="#五、几何-geometry" aria-hidden="true">#</a></h2><p>有别于 geography， geometry 是更普遍意义上的几何图形(点、线、面)，原则上是笛卡尔空间直角坐标系：而 geography 类型的数据则定义在地球椭球体表面的经纬度上。</p><p>可以互相转换，但是在特殊计算时有明显区别。</p><p>几何是某一个地理对象的形状，即空间部分，非空间信息部分是普通属性数据。</p><h3 id="_5-1-简单几何的构造-8-3章节" tabindex="-1">5.1 简单几何的构造 （8.3章节） <a class="header-anchor" href="#_5-1-简单几何的构造-8-3章节" aria-hidden="true">#</a></h3><p>• 点-线串-多边形-几何集</p><p>• 特殊的几何构造</p><p>还有一批输入函数可以创建几何: ST_Point；ST_MakePoint；ST LineFromMultiPoint；ST_MakeLine;ST MakePolygon；ST_Polygon</p><h3 id="_5-2-点串线" tabindex="-1">5.2 点串线 <a class="header-anchor" href="#_5-2-点串线" aria-hidden="true">#</a></h3><p><img src="'+E+'" alt=""></p><h3 id="_5-3-自动解析-换成wkt的点-仍然可以执行" tabindex="-1">5.3 自动解析 换成wkt的点，仍然可以执行 <a class="header-anchor" href="#_5-3-自动解析-换成wkt的点-仍然可以执行" aria-hidden="true">#</a></h3><p><img src="'+K+'" alt=""></p><h3 id="_5-4-几何集-collection-把一堆几何放到一个几何里面输出" tabindex="-1">5.4 几何集（Collection） 把一堆几何放到一个几何里面输出 <a class="header-anchor" href="#_5-4-几何集-collection-把一堆几何放到一个几何里面输出" aria-hidden="true">#</a></h3><p><img src="'+P+'" alt=""></p><h3 id="_5-5-范围框-st-makeenvelope-8-3-3" tabindex="-1">5.5 范围框 ST_MakeEnvelope （8.3.3） <a class="header-anchor" href="#_5-5-范围框-st-makeenvelope-8-3-3" aria-hidden="true">#</a></h3><p>由四个xy的最大最小值+坐标系，输出范围框</p><p><img src="'+q+'" alt=""></p><h3 id="_5-6-输出ewkt" tabindex="-1">5.6 输出EWKT <a class="header-anchor" href="#_5-6-输出ewkt" aria-hidden="true">#</a></h3><p><img src="'+G+'" alt=""></p><h3 id="_5-7-web墨卡托-瓦片计算范围-st-tileenvelope-8-3-10" tabindex="-1">5.7 Web墨卡托 瓦片计算范围 ST_TileEnvelope（8.3.10） <a class="header-anchor" href="#_5-7-web墨卡托-瓦片计算范围-st-tileenvelope-8-3-10" aria-hidden="true">#</a></h3><p>缩放等级为2时，X方向的第一个，Y方向的第一个瓦片</p><p>给出四个角点的坐标</p><p><img src="'+D+'" alt=""></p>',83),A=[R];function M(Q,z,C,N,$,L){return a(),s("div",null,A)}const O=e(B,[["render",M]]);export{J as __pageData,O as default};
